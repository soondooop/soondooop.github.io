<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í¬ë¦¬ìŠ¤ë§ˆìŠ¤ í™ˆíŒŒí‹° ì´ˆëŒ€ì¥</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #1a472a;
            font-family: 'Arial', sans-serif;
            overflow: hidden;
        }

        .snow {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .invitation-card {
            position: relative;
            width: 300px;
            background: #fff;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
            text-align: center;
            transform-style: preserve-3d;
            transform: perspective(1000px);
            transition: transform 0.5s;
            z-index: 2;
        }

        .invitation-card:hover {
            transform: perspective(1000px) rotateY(10deg);
        }

        .tree {
            font-size: 50px;
            margin: 20px 0;
            animation: glow 2s infinite alternate;
        }

        @keyframes glow {
            from {
                text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #0f0;
            }
            to {
                text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #0f0;
            }
        }

        h1 {
            color: #c41e3a;
            margin-bottom: 20px;
        }

        .details {
            margin: 20px 0;
            color: #333;
        }

        .rsvp-button {
            background: #c41e3a;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: transform 0.3s, background 0.3s;
        }

        .rsvp-button:hover {
            transform: scale(1.1);
            background: #a01830;
        }

        .gift {
            font-size: 24px;
            cursor: pointer;
            margin: 20px 0;
            transition: transform 0.3s;
        }

        .gift:hover {
            transform: scale(1.2) rotate(10deg);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 3;
        }

        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .close {
            float: right;
            cursor: pointer;
            font-size: 20px;
        }

        input, textarea {
            width: 100%;
            margin: 10px 0;
            padding: 5px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <div class="snow"></div>
    
    <div class="invitation-card">
        <div class="tree">ğŸ„</div>
        <h1>í¬ë¦¬ìŠ¤ë§ˆìŠ¤ í™ˆíŒŒí‹°</h1>
        <div class="details">
            <p>ğŸ… ì¦ê±°ìš´ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ë¥¼ í•¨ê»˜ ë³´ë‚´ìš”! ğŸ…</p>
            <p>ğŸ“… 2023ë…„ 12ì›” 24ì¼ í† ìš”ì¼</p>
            <p>â° ì˜¤í›„ 6ì‹œ</p>
            <p>ğŸ“ ìš°ë¦¬ì§‘</p>
        </div>
        <div class="gift" onclick="showSurprise()">ğŸ</div>
        <button class="rsvp-button" onclick="showRSVP()">ì°¸ì„ ì—¬ë¶€ ì•Œë ¤ì£¼ê¸°</button>
    </div>

    <div class="modal" id="rsvpModal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('rsvpModal')">&times;</span>
            <h2>ì°¸ì„ ì—¬ë¶€</h2>
            <input type="text" placeholder="ì´ë¦„" id="name">
            <select id="attendance" style="width: 100%; margin: 10px 0; padding: 5px;">
                <option value="yes">ì°¸ì„í•©ë‹ˆë‹¤</option>
                <option value="no">ë¶ˆì°¸í•©ë‹ˆë‹¤</option>
            </select>
            <textarea placeholder="ë©”ì‹œì§€ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”"></textarea>
            <button class="rsvp-button" onclick="submitRSVP()">ì œì¶œí•˜ê¸°</button>
        </div>
    </div>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        const firebaseConfig = {
        apiKey: "AIzaSyB84zMqHO-hvn29ubCDJ5k8QTQYq_jPslc",
        authDomain: "sd-test-c8fd7.firebaseapp.com",
        projectId: "sd-test-c8fd7",
        storageBucket: "sd-test-c8fd7.firebasestorage.app",
        messagingSenderId: "565971267593",
        appId: "1:565971267593:web:9778d1c7db21bad5a648d8"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      // RSVP ì œì¶œ í•¨ìˆ˜ë¥¼ ì „ì—­ ìŠ¤ì½”í”„ì— ì¶”ê°€
      window.submitRSVP = async function() {
        const name = document.getElementById('name').value;
        const attendance = document.getElementById('attendance').value;
        const message = document.querySelector('textarea').value;

        if(!name) {
          alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
          return;
        }

        try {
          // Firestoreì— ë°ì´í„° ì €ì¥
          const docRef = await addDoc(collection(db, "rsvp"), {
            name: name,
            attendance: attendance,
            message: message,
            timestamp: new Date()
          });

          alert(`${name}ë‹˜ì˜ ì‘ë‹µì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!`);
          closeModal('rsvpModal');
          
          // í¼ ì´ˆê¸°í™”
          document.getElementById('name').value = '';
          document.querySelector('textarea').value = '';
        } catch (error) {
          console.error("Error adding document: ", error);
          alert('ì‘ë‹µ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
        }
      };
    </script>

    <script>
        // ëˆˆë‚´ë¦¬ëŠ” íš¨ê³¼
        function createSnow() {
            const snow = document.querySelector('.snow');
            for(let i = 0; i < 50; i++) {
                const snowflake = document.createElement('div');
                snowflake.style.position = 'absolute';
                snowflake.style.left = Math.random() * 100 + '%';
                snowflake.style.top = Math.random() * 100 + '%';
                snowflake.style.fontSize = '20px';
                snowflake.innerHTML = 'â„';
                snowflake.style.opacity = Math.random();
                snowflake.style.animation = `fall ${Math.random() * 3 + 2}s linear infinite`;
                snow.appendChild(snowflake);
            }
        }

        // ëˆˆ ë‚´ë¦¬ëŠ” ì• ë‹ˆë©”ì´ì…˜
        document.styleSheets[0].insertRule(`
            @keyframes fall {
                0% {
                    transform: translateY(-100vh);
                }
                100% {
                    transform: translateY(100vh);
                }
            }
        `, 0);

        createSnow();

        function showRSVP() {
            document.getElementById('rsvpModal').style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function showSurprise() {
            alert('ğŸ‰ ì„ ë¬¼ì€ íŒŒí‹°ì—ì„œ ê³µê°œë©ë‹ˆë‹¤! ğŸ‰');
        }

        // ì¹´ë“œ 3D íš¨ê³¼
        document.querySelector('.invitation-card').addEventListener('mousemove', function(e) {
            const card = this;
            const cardRect = card.getBoundingClientRect();
            const cardCenterX = cardRect.left + cardRect.width / 2;
            const cardCenterY = cardRect.top + cardRect.height / 2;
            const angleY = -(e.clientX - cardCenterX) * 0.01;
            const angleX = (e.clientY - cardCenterY) * 0.01;
            card.style.transform = `perspective(1000px) rotateY(${angleY}deg) rotateX(${angleX}deg)`;
        });

        document.querySelector('.invitation-card').addEventListener('mouseleave', function() {
            this.style.transform = 'perspective(1000px)';
        });
    </script>
</body>
</html>
